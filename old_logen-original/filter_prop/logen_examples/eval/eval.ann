/* file: eval/eval.ann */:- multifile residual/1, filter/2, ann_clause/3, table/1.:- dynamic residual/1, filter/2, ann_clause/3, table/1.:- dynamic static_consult/1.static_consult([])./* TO DO: define type:eval_type ---> cst(static) | var(dynamic) | plus(eval_type,eval_type);*/residual(eval(A,B,C)).filter(eval(A,B,C),[static,list(nonvar),dynamic]).ann_clause(1,eval(cst(A),B,A),true).ann_clause(2,eval(var(A),B,C),memo(member((A,C),B))).ann_clause(3,eval(plus(A,B),C,D),(unfold(eval(A,C,E)),unfold(eval(B,C,F)),rescall(D is E+F))).residual(member(A,B)).filter(member(A,B),[dynamic,dynamic]).ann_clause(4,member(A,[A|B]),true).ann_clause(5,member(A,[B|C]),memo(member(A,C))).